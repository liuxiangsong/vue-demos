(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{346:function(e,s,n){"use strict";n.r(s);var t=n(40),o=Object(t.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"websocket"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#websocket"}},[e._v("#")]),e._v(" websocket")]),e._v(" "),n("h2",{attrs:{id:"superwebsocket"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#superwebsocket"}},[e._v("#")]),e._v(" SuperWebSocket")]),e._v(" "),n("p",[e._v("1、 在NuGet中查找添加SuperWebSocketNETServer")]),e._v(" "),n("p",[e._v("2、 server端代码")]),e._v(" "),n("div",{staticClass:"language-C# extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(' private static void StartWebSocketServer()\n        {\n            ws = new WebSocketServer();\n            ws.NewSessionConnected += Ws_NewSessionConnected;\n            ws.NewMessageReceived += Ws_NewMessageReceived;\n            ws.SessionClosed += Ws_SessionClosed;\n            if (!ws.Setup("127.0.0.1", 51234))\n            {\n                Console.WriteLine("设置WebSocket服务侦听地址失败");\n                return;\n            }\n\n            if (!ws.Start())\n            {\n                Console.WriteLine("启动WebSocket服务侦听失败");\n                return;\n            }\n        }\n\n        private static void Ws_NewSessionConnected(WebSocketSession session)\n        {\n            SendToAll(session, "NewSessionConnected");\n        }\n\n        private static void Ws_NewMessageReceived(WebSocketSession session, string value)\n        {\n             SendToAll(session,"NewMessageReceived:"+ value);\n        }\n\n        private static void Ws_SessionClosed(WebSocketSession session, SuperSocket.SocketBase.CloseReason value)\n        {\n            SendToAll(session, "SessionClosed");\n        }\n\n        private static void SendToAll(WebSocketSession session, string msg)\n        {\n            foreach (var sendSession in session.AppServer.GetAllSessions())\n            {\n                sendSession.Send(msg);\n            }\n        }\n')])])]),n("h2",{attrs:{id:"fleck"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fleck"}},[e._v("#")]),e._v(" fleck")])])}),[],!1,null,null,null);s.default=o.exports}}]);